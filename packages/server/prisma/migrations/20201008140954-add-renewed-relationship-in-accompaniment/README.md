# Migration `20201008140954-add-renewed-relationship-in-accompaniment`

This migration has been generated by Arthur Santos at 10/8/2020, 11:09:54 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."accompaniments" ADD COLUMN "accompanimentsId" text   

CREATE UNIQUE INDEX "accompaniments_accompanimentsId_unique" ON "public"."accompaniments"("accompanimentsId")

ALTER TABLE "public"."accompaniments" ADD FOREIGN KEY ("accompanimentsId")REFERENCES "public"."accompaniments"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201008135410-add-renewed-at-to-accompaniments..20201008140954-add-renewed-relationship-in-accompaniment
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -118,8 +118,11 @@
   createdAt         DateTime  @default(now())
   updatedAt         DateTime  @updatedAt
+  renewedTo         Accompaniments? @relation(name: "renewed")
+  renewedFrom       Accompaniments? @relation(name: "renewed")
+
   annotations AccompanimentAnnotations[]
   cancelation Cancelations?
   invoice     Invoices?                  @relation(fields: [invoiceId], references: [id])
 }
```


